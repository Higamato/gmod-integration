local colorRed = Color(200, 0, 0)
local colorBlue = Color(29, 97, 129)

hook.Add("PlayerInitialSpawn", "SquishLogs:Log:Player:Spawn", function(ply)
    SquishLog:New()
        :SetCategory("Player | Connection")
        :AddFragment(ply)
        :AddFragment(' has joined the server')
        :Send()
end)

hook.Add("PlayerDeath", "SquishLogs:Log:Player:Death", function(victim, inflictor, attacker)
    local log = SquishLog:New()
        :SetCategory("Player | Death")
        :AddFragment(victim)

    if attacker:IsPlayer() then
        log = log:AddFragment(' was killed by ')
            :AddFragment(attacker)
    else
        log = log:AddFragment(' has died')
    end

    log:Send()
end)

hook.Add("PlayerSpawn", "SquishLogs:Log:Player:Respawn", function(ply)
    SquishLog:New()
        :SetCategory("Player | Respawn")
        :AddFragment(ply)
        :AddFragment(' has respawned')
        :Send()
end)

hook.Add("EntityTakeDamage", "SquishLogs:Log:Player:Damage", function(target, dmgData)
    if (!target:IsPlayer()) then return end // Something else is being damaged?

    local attacker = dmgData:GetAttacker()
    SquishLog:New()
        :SetCategory("Player | Damage")
        :AddFragment(target)
        :AddFragment(' took ')
        :SetFragmentColor(colorRed)
        :AddFragment(math.Round(dmgData:GetDamage()))
        :AddFragment(' damage from ')
        :AddFragment(attacker and (attacker:IsPlayer() and attacker or attacker:GetClass()) or "Unknown")
        :Send()
end)

hook.Add("PlayerCanPickupWeapon", "SquishLogs:Log:Player:WeaponPickup", function(ply, weapon)
    SquishLog:New()
        :SetCategory("Player | Weapon Pickup")
        :AddFragment(ply)
        :AddFragment(' attempted to pick up weapon ')
        :SetFragmentColor(colorBlue)
        :AddFragment(weapon:GetClass())
        :Send()
end)

hook.Add("PlayerCanPickupItem", "SquishLogs:Log:Player:ItemPickup", function(ply, item)
    SquishLog:New()
        :SetCategory("Player | Weapon Pickup")
        :AddFragment(ply)
        :AddFragment(' attempted to pick up item ')
        :SetFragmentColor(colorBlue)
        :AddFragment(item:GetClass())
        :Send()
end)

hook.Add("PlayerSay", "SquishLogs:Log:Player:Say", function(ply, text)
    SquishLog:New()
        :SetCategory("Player | Chat")
        :AddFragment(ply)
        :AddFragment(' said "')
        :SetFragmentColor(Color(109, 77, 139))
        :AddFragment(text)
        :SetFragmentColor()
        :AddFragment('"')
        :Send()
end)
